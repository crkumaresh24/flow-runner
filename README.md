# flow-runner-spark-cluster-java
Java application to run the flow generated by flow-designer in spark cluster

# Setup
git clone https://github.com/crkumaresh24/flow-runner-spark-cluster-java.git  
cd flow-runner-spark-cluster-java  
./gradlew clean buildAndCopyToStaticServer  

# Spark Submit on local
./bin/spark-submit --class com.stacksnow.flow.runner.spark.java.FlowRunner --jars http://localhost:8000/tasks-1.0-SNAPSHOT.jar http://localhost:8000/core-1.0-SNAPSHOT.jar  http://localhost:8000/runnerList.json dag.json

# Spark Submit on kubernetes
./bin/spark-submit \
    --master k8s://https://kubernetes.docker.internal:6443 \
    --deploy-mode client \
    --name spark-pi \
    --class com.stacksnow.flow.runner.spark.java.FlowRunner \
    --conf spark.executor.instances=2 \
    --conf spark.kubernetes.container.image=apache-spark/spark:2.4.6 \
    --conf spark.kubernetes.authenticate.driver.serviceAccountName=spark \
    --jars http://host.docker.internal:8000/tasks-1.0-SNAPSHOT.jar,http://host.docker.internal:8000/gson-2.2.4.jar,http://host.docker.internal:8000/postgresql-42.2.9.jar,http://host.docker.internal:8000/jgrapht-core-1.0.1.jar \
    http://host.docker.internal:8000/core-1.0-SNAPSHOT.jar  http://host.docker.internal:8000/runnerList.json http://host.docker.internal:8000/jdbctest.json
